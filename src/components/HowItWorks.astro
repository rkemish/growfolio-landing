---
// How It Works section - 3 step process
import { getTranslations, createT } from '../i18n/utils';
import { type SupportedLocale } from '../i18n/config';

const lang = ((Astro.locals as any).lang as SupportedLocale) || 'en';
const translations = await getTranslations(lang);
const t = createT(translations);
---

<section class="py-24 lg:py-32 px-6 lg:px-10" style="background: var(--color-cream-dark);">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-16 reveal">
      <span
        class="inline-block text-xs font-semibold uppercase tracking-widest mb-4"
        style="color: var(--color-gold);"
      >
        {t('how_it_works.section_label')}
      </span>
      <h2 class="font-display text-3xl md:text-4xl lg:text-5xl font-semibold" style="color: var(--color-forest);">
        {t('how_it_works.headline')}
      </h2>
    </div>

    <div class="relative flex flex-col lg:flex-row lg:justify-between gap-12 lg:gap-6 mt-16">
      <!-- Connecting Line (desktop only) -->
      <div
        class="hidden lg:block absolute top-10 left-[15%] right-[15%] h-0.5"
        style="background: linear-gradient(90deg, var(--color-gold-light), var(--color-teal), var(--color-gold-light));"
      ></div>

      <!-- Step 1 -->
      <div class="flex-1 text-center relative px-4 reveal">
        <div
          class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 relative z-10"
          style="background: var(--color-cream); border: 3px solid var(--color-teal);"
        >
          <span class="font-display text-3xl font-semibold" style="color: var(--color-teal);">{t('how_it_works.steps.step1.number')}</span>
        </div>
        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-forest);">{t('how_it_works.steps.step1.title')}</h3>
        <p class="text-gray-500">
          {t('how_it_works.steps.step1.description')}
        </p>
      </div>

      <!-- Step 2 -->
      <div class="flex-1 text-center relative px-4 reveal">
        <div
          class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 relative z-10"
          style="background: var(--color-cream); border: 3px solid var(--color-teal);"
        >
          <span class="font-display text-3xl font-semibold" style="color: var(--color-teal);">{t('how_it_works.steps.step2.number')}</span>
        </div>
        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-forest);">{t('how_it_works.steps.step2.title')}</h3>
        <p class="text-gray-500">
          {t('how_it_works.steps.step2.description')}
        </p>
      </div>

      <!-- Step 3 -->
      <div class="flex-1 text-center relative px-4 reveal">
        <div
          class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 relative z-10"
          style="background: var(--color-cream); border: 3px solid var(--color-teal);"
        >
          <span class="font-display text-3xl font-semibold" style="color: var(--color-teal);">{t('how_it_works.steps.step3.number')}</span>
        </div>
        <h3 class="text-xl font-semibold mb-2" style="color: var(--color-forest);">{t('how_it_works.steps.step3.title')}</h3>
        <p class="text-gray-500">
          {t('how_it_works.steps.step3.description')}
        </p>
      </div>
    </div>
  </div>
</section>
