---
// Hero section with animated growth chart and floating cards
import { getTranslations, createT } from '../i18n/utils';
import { type SupportedLocale } from '../i18n/config';

const lang = ((Astro.locals as any).lang as SupportedLocale) || 'en';
const translations = await getTranslations(lang);
const t = createT(translations);

// Parse headline to add accent styling
const headline = t('hero.headline')
  .replace('<accent>', '<span class="underline-accent" style="color: var(--color-teal);">')
  .replace('</accent>', '</span>');
---

<section class="min-h-screen flex items-center px-4 sm:px-6 lg:px-10 pt-24 pb-12 lg:pt-40 lg:pb-24">
  <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-8 lg:gap-16 items-center">
    <!-- Content -->
    <div class="animate-fade-in-up text-center lg:text-left">
      <div
        class="inline-flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-semibold mb-4 sm:mb-6 animate-fade-in-up delay-100"
        style="background: var(--color-gold-light); color: var(--color-forest);"
      >
        <svg class="w-3 h-3 sm:w-4 sm:h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"
          ></path>
        </svg>
        {t('hero.badge')}
      </div>

      <h1
        class="font-display text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-semibold leading-tight mb-4 sm:mb-6 animate-fade-in-up delay-200"
        style="color: var(--color-forest);"
        set:html={headline}
      />

      <p class="text-base sm:text-lg lg:text-xl text-gray-500 max-w-xl mx-auto lg:mx-0 mb-6 sm:mb-8 animate-fade-in-up delay-300">
        {t('hero.subheadline', { minInvestment: '€25' })}
      </p>

      <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center lg:justify-start animate-fade-in-up delay-400">
        <a href="#waitlist" class="btn btn-primary justify-center">
          {t('hero.cta_primary')}
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"></path>
          </svg>
        </a>
        <a href="#solution" class="btn btn-secondary justify-center">{t('hero.cta_secondary')}</a>
      </div>

      <div
        class="grid grid-cols-3 gap-4 sm:gap-8 lg:gap-12 mt-8 sm:mt-12 pt-6 sm:pt-8 animate-fade-in-up delay-500"
        style="border-top: 1px solid rgba(26, 58, 50, 0.1);"
      >
        <div>
          <div class="font-display text-xl sm:text-2xl lg:text-3xl font-semibold" style="color: var(--color-forest);">
            €25
          </div>
          <div class="text-xs sm:text-sm text-gray-500">{t('hero.stats.min_investment_label')}</div>
        </div>
        <div>
          <div class="font-display text-xl sm:text-2xl lg:text-3xl font-semibold" style="color: var(--color-forest);">
            450M
          </div>
          <div class="text-xs sm:text-sm text-gray-500">{t('hero.stats.eu_consumers_label')}</div>
        </div>
        <div>
          <div class="font-display text-xl sm:text-2xl lg:text-3xl font-semibold" style="color: var(--color-forest);">
            €0
          </div>
          <div class="text-xs sm:text-sm text-gray-500">{t('hero.stats.trading_fees_label')}</div>
        </div>
      </div>
    </div>

    <!-- Visual -->
    <div class="relative animate-fade-in-right max-w-sm sm:max-w-md lg:max-w-none mx-auto order-first lg:order-last">
      <div class="relative aspect-square">
        <!-- Growth Chart SVG -->
        <svg class="absolute inset-0 w-full h-full" viewBox="0 0 400 400" fill="none">
          <defs>
            <linearGradient id="chartGradient" x1="0%" y1="100%" x2="0%" y2="0%">
              <stop offset="0%" stop-color="rgba(61, 139, 122, 0.1)"></stop>
              <stop offset="100%" stop-color="rgba(61, 139, 122, 0.4)"></stop>
            </linearGradient>
          </defs>
          <!-- Grid lines -->
          <line x1="50" y1="50" x2="50" y2="350" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <line x1="150" y1="50" x2="150" y2="350" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <line x1="250" y1="50" x2="250" y2="350" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <line x1="350" y1="50" x2="350" y2="350" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <line x1="50" y1="350" x2="350" y2="350" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <line x1="50" y1="250" x2="350" y2="250" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <line x1="50" y1="150" x2="350" y2="150" stroke="rgba(26, 58, 50, 0.1)" stroke-width="1"></line>
          <!-- Area fill -->
          <path
            d="M50 350 L50 320 L100 280 L150 290 L200 220 L250 180 L300 140 L350 100 L350 350 Z"
            fill="url(#chartGradient)"></path>
          <!-- Growth line -->
          <path
            class="growth-line"
            d="M50 320 Q75 300 100 280 T150 290 T200 220 T250 180 T300 140 T350 100"
            stroke="#3d8b7a"
            stroke-width="4"
            stroke-linecap="round"
            fill="none"></path>
          <!-- End point -->
          <circle class="animate-pulse-dot" cx="350" cy="100" r="8" fill="#c9a962"></circle>
          <circle cx="350" cy="100" r="4" fill="#1a3a32"></circle>
        </svg>

        <!-- Floating Cards - Hidden on small mobile, visible on sm+ -->
        <div
          class="hidden sm:block absolute top-[10%] right-[5%] bg-white rounded-2xl p-3 lg:p-4 shadow-xl animate-float float-card-1"
        >
          <div
            class="w-8 h-8 lg:w-10 lg:h-10 rounded-xl flex items-center justify-center mb-1 lg:mb-2"
            style="background: #e8f5e9;"
          >
            <svg class="w-4 h-4 lg:w-5 lg:h-5" viewBox="0 0 24 24" fill="none" stroke="#3d8b7a" stroke-width="2">
              <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"></path>
            </svg>
          </div>
          <div class="text-xs lg:text-sm font-semibold" style="color: var(--color-forest);">{t('hero.cards.monthly_dca')}</div>
          <div class="font-display text-lg lg:text-2xl font-semibold" style="color: var(--color-teal);">
            €80
          </div>
        </div>

        <div
          class="hidden sm:block absolute bottom-[20%] left-0 bg-white rounded-2xl p-3 lg:p-4 shadow-xl animate-float float-card-2"
        >
          <div
            class="w-8 h-8 lg:w-10 lg:h-10 rounded-xl flex items-center justify-center mb-1 lg:mb-2"
            style="background: #fff3e0;"
          >
            <svg class="w-4 h-4 lg:w-5 lg:h-5" viewBox="0 0 24 24" fill="none" stroke="#c9a962" stroke-width="2">
              <path d="M23 6l-9.5 9.5-5-5L1 18"></path>
            </svg>
          </div>
          <div class="text-xs lg:text-sm font-semibold" style="color: var(--color-forest);">
            {t('hero.cards.portfolio_growth')}
          </div>
          <div class="font-display text-lg lg:text-2xl font-semibold" style="color: var(--color-teal);">
            +24.3%
          </div>
        </div>

        <div
          class="hidden sm:block absolute top-[40%] right-[-5%] bg-white rounded-2xl p-3 lg:p-4 shadow-xl animate-float float-card-3"
        >
          <div
            class="w-8 h-8 lg:w-10 lg:h-10 rounded-xl flex items-center justify-center mb-1 lg:mb-2"
            style="background: #fce4ec;"
          >
            <svg class="w-4 h-4 lg:w-5 lg:h-5" viewBox="0 0 24 24" fill="none" stroke="#d4847c" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 6v6l4 2"></path>
            </svg>
          </div>
          <div class="text-xs lg:text-sm font-semibold" style="color: var(--color-forest);">
            {t('hero.cards.next_investment')}
          </div>
          <div class="font-display text-lg lg:text-2xl font-semibold" style="color: var(--color-teal);">
            {t('hero.cards.days', { count: '3' })}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
